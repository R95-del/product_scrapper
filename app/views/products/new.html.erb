<div class="row">
  <div class="col-md-8 mx-auto">
    <div class="card">
      <div class="card-body">
        <h2 class="card-title mb-4">Add New Product</h2>

        <!-- Single URL Form -->
        <div class="mb-5">
          <h4>Add Single Product</h4>
          <%= form_for @product, html: { class: "form" } do |f| %>
            <div class="mb-3">
              <%= f.label :url, "Product URL", class: "form-label" %>
              <%= f.text_field :url, class: "form-control form-control-lg" %>
              <div class="form-text">Enter the URL of the product you want to scrape</div>
            </div>

            <div class="d-grid">
              <%= f.submit "Scrape Product", class: "btn btn-primary btn-lg" %>
            </div>
          <% end %>
        </div>

        <!-- Bulk Upload Form -->
        <div class="mb-3">
          <h4>Bulk Upload</h4>
          <%= form_tag import_products_path, multipart: true, class: "form" do %>
            <div class="mb-3">
              <label class="form-label">Upload Excel File</label>
              <%= file_field_tag :file, class: "form-control", accept: ".xlsx, .xls" %>
              <div class="form-text">
                Upload an Excel file with URLs in the first column.
                <a href="#" data-bs-toggle="modal" data-bs-target="#templateModal">View template format</a>
              </div>
            </div>

            <div class="d-grid gap-2">
              <%= submit_tag "Process URLs", class: "btn btn-success btn-lg" %>
              <%= link_to 'Cancel', products_path, class: 'btn btn-outline-secondary' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Template Modal -->
<div class="modal fade" id="templateModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Excel Template Format</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>Your Excel file should have the following format:</p>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>URLs</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>https://www.flipkart.com/product1</td>
            </tr>
            <tr>
              <td>https://www.flipkart.com/product2</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
